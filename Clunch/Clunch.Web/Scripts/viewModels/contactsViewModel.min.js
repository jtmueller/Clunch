(function(){var n;(function(n,t){return n.ContactsViewModel=function(n){var i=this;this.contacts=ko.observableArray(n),this.addContact=function(){var n,i=this;return n=Clunch.utility.serializeObject(t("#contactForm")),t.ajax({url:"/api/Contacts",data:JSON.stringify(n),type:"POST",dataType:"json",contentType:"application/json"}).done(function(){return toastr.success("You have successfully created a new contact!","Success!"),i.contacts.push(n),window.location.href="#/"}).fail(function(){return toastr.error("There was an error creating your new contact.","<sad face>")})},this.getContact=function(n){return n="contacts/"+n,i.activeContact=_.find(i.contacts(),function(t){return t.Id===n})},this.updateContact=function(){var n=this;return t.ajax({url:"/api/Contacts",data:JSON.stringify(this.activeContact),type:"POST",dataType:"json",contentType:"application/json"}).done(function(){return toastr.success("You have successfully updated your contact!","Success!"),window.location.href="#/"}).fail(function(){return console.log("Error: Update Contact",arguments),toastr.error("There was an error editing your contact.","<sad face>")})},this.deleteContact=function(n){return i.contacts.splice(i.contacts.indexOf(n),1),t.ajax({url:"/api/Contacts",data:n.Id,type:"DELETE",contentType:"application/json"}).done(function(){return toastr.success("You have successfully deleted your contact!","Success!")}).fail(function(){return console.log("Error: Delete Contact",arguments),toastr.error("There was an error editing your contact.","<sad face>")})}}})((n=Clunch.ViewModels)!=null?n:Clunch.ViewModels={},jQuery)}).call(this)