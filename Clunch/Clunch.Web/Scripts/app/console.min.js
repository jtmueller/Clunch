(function(){"use strict";var t,i,n=function(n,t){return function(){return n.apply(t,arguments)}};t=function(){function t(t,i,r){this.sendMessage=n(this.sendMessage,this),this.login=n(this.login,this),this.addMessage=n(this.addMessage,this),this.scope=t,this.el=i,this.dialog=r,this.output=this.el.find(".console"),this.textBox=this.el.find('input[type="text"]'),this.el.find("form").submit(this.sendMessage),this.el.find('input[type="button"]').click(this.sendMessage),this.hub=$.connection.clunchHub,this.hub.client.addMessage=this.addMessage,this.hub.client.login=this.login,this.hub.client.log=function(n){return console.log(n)},this.hub.client.success=function(n,t){return toastr.success(n,t)},this.hub.client.info=function(n,t){return toastr.info(n,t)},this.hub.client.warning=function(n,t){return toastr.warning(n,t)},this.hub.client.error=function(n,t){return console.error(n),toastr.error(n,t)},$.connection.hub.start().fail(function(n){return console.error(n),toastr.error(n)})}return t.prototype.addMessage=function(n,t,i){return this.output.append($("<div/>").addClass(i).text(""+n+": "+t)),this.output.scrollTop(this.output.prop("scrollHeight"))},t.prototype.login=function(){var n;return n=prompt("Who are you?",""),n.length>0?this.hub.server.login(n):void 0},t.prototype.sendMessage=function(n){var t;if(n.preventDefault(),t=this.textBox.val(),t.length!==0){try{this.hub.server.send(t)}catch(i){toastr.error(i.message)}return this.textBox.val(""),this.textBox.focus()}},t}(),i=angular.module("clunch"),i.directive("console",function(){return{restrict:"E",replace:!0,scope:{},template:'<div>\n    <div class="row-fluid">\n        <div class="span5 console">\n        <\/div>\n    <\/div>\n    <div class="row-fluid">\n        <form name="consoleForm" class="navbar-form pull-left span5">\n            <input type="text" class="span10" required />\n            <input type="button" class="btn span2" value="Send" ng-disabled="consoleForm.$invalid" />\n        <\/form>\n    <\/div>\n<\/div>',controller:["$scope","$element","$dialog",t],link:function(){}}})}).call(this)